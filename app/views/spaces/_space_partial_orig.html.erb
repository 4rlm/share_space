<div class="container">

  <div class="row space_details">
    <!-- SPACE DETAILS COLUMN -->
    <div class="col-md-7">
      <h3>Space Details</h3>
      <p><strong>Name:</strong><%= @space.name %></p>
      <p><strong>Website:</strong><%= @space.website %></p>
      <p><strong>Phone:</strong><%= @space.phone %></p>
      <p><strong>Manager:</strong><% host = @space.user %><%= link_to host.profile.fullname, user_path(host) %></p>

      <%= link_to 'Edit', edit_space_path(@space) %><br><br>
      <%if !@space %>
      | <%= link_to 'Back', spaces_path %>
      <%end%>
    </div>

    <!-- AMENITIES COLUMN -->
    <div class="col-md-4">
      <h3>Amenities</h3>
      <% if @space.amenities.count > 0 %>
      <% @space_amenities = @space.amenities %>
      <%= render 'space_amenities/space_amenities_partial', space_amenities: @space_amenities %>
      <%= link_to 'Edit Amenities', edit_space_path(@space) %>
      <% else %>
      <%= link_to 'Add Amenities', edit_space_path(@space) %>
      <% end %>
    </div>

  </div>

  <hr>

  <!-- desks and desk details -->
  <div class="row desk_details">
    <% if @space.desks %>
    <% @desks = @space.desks %>

    <% if @desks.count > 0 %>
    <h2>Desks <%= icon('cubes') %></h2>
    <% @desks.each do |desk|%>
    <% @desk = desk %>
    <%= render partial: 'desks/desk_partial', desk: @desk %><br>
    <%end%>
    <%end%>
    <%end%>

    <!-- Add desk modal -->
    <div id="add-desks">
      <% if @current_user && (@current_user == @space.user || @current_user.role == "admin") %>
      <%= render partial: 'desks/add_desk_modal' %>
      <%end%>
      <!-- list bookings here -->
    </div>

  </div>

  <hr>

  <!-- IMAGE GALLERY FOR SPACE SHOW/DETAIL PAGE -->
  <div class="row" id="space-image-gallery">

    <!-- VIEW PHOTOS -->
    <% photos = @space.photos %>
    <% if photos %>
    <% photos.each do |photo| %>
    <div id="space-photo">
      <%= link_to image_tag(photo.image.url(:thumb)), photo.image.url, target: '_blank', width: 175 %><br>
      <% if @current_user && (@current_user == photo.user || @current_user.role == "admin") %>

      <%= link_to photo, remote: true, method: :delete, data: { confirm: 'Are you sure?' } do %>
      <%= icon('trash') %>
      <% end %>

      <% end %>
    </div>
    <% end %>
    <% end %>

    <div id="space-image-gallery-text">
      <!-- UPLOAD IMAGES TO SPACE (ONLY ADMIN AND SPACE HOST) -->
      <% if @current_user && (@current_user == @space.user || @current_user.role == "admin") %>
      <%= render partial: 'photos/upload_image_modal', space: @space %>
      <% end %>
    </div>

  </div>

  <hr>

  <!-- address details and map -->
  <div class="row address_details">

    <% if !@space.address.nil? %>
      <% @address = @space.address %>
      <%= render 'addresses/address_partial', address: @address %>
    <% else %>
      <div id="add-address">
        <% if @current_user && (@current_user == @space.user || @current_user.role == "admin") %>
        <%= render partial: 'addresses/add_address_modal' %><br>
        <%end%>
      </div>
    <% end %>
  </div>

  <hr>

</div>
